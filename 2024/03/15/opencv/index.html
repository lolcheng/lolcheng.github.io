<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OpenCV学习 | 随风的神秘小屋</title><meta name="author" content="沈畅"><meta name="copyright" content="沈畅"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="有关于OpenCV方面的相关知识">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenCV学习">
<meta property="og:url" content="https://www.lolcheng.top/2024/03/15/opencv/index.html">
<meta property="og:site_name" content="随风的神秘小屋">
<meta property="og:description" content="有关于OpenCV方面的相关知识">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.lolcheng-picbed.top/img/opencv.png">
<meta property="article:published_time" content="2024-03-14T16:45:00.000Z">
<meta property="article:modified_time" content="2024-03-14T16:45:00.000Z">
<meta property="article:author" content="沈畅">
<meta property="article:tag" content="OpenCV">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.lolcheng-picbed.top/img/opencv.png"><link rel="shortcut icon" href="https://www.lolcheng-picbed.top/img/favicon.png"><link rel="canonical" href="https://www.lolcheng.top/2024/03/15/opencv/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OpenCV学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-15 00:45:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 致来者</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.lolcheng-picbed.top/img/opencv.png')"><nav id="nav"><span id="blog-info"><a href="/" title="随风的神秘小屋"><span class="site-name">随风的神秘小屋</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 致来者</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">OpenCV学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-14T16:45:00.000Z" title="发表于 2024-03-15 00:45:00">2024-03-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-14T16:45:00.000Z" title="更新于 2024-03-15 00:45:00">2024-03-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/">机器人</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="OpenCV学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="ubuntu-opencv-vscode-cmakelists："><a href="#ubuntu-opencv-vscode-cmakelists：" class="headerlink" title="ubuntu+opencv+vscode+cmakelists："></a>ubuntu+opencv+vscode+cmakelists：</h1><p>1.下载opencv4压缩包：<a target="_blank" rel="noopener" href="https://opencv.org/releases/的.zip文件">https://opencv.org/releases/的.zip文件</a><br>2.生成opencv4文件：解压完发现opencv是一个cmake工程，里面有CMakeList.txt，因此需要cmake生成Makefile。建一个build文件夹并进去使用cmake ..，而后使用make或者make -j4，make -j8 ， make -12，来编译，j后面这个数字时调用多线程进行编译。此时opencv便被安装到了/usr/local/include/opencv4，对应库文件的路径则为/usr/local/lib。此时opencv4便被安装好了，使用pkg-config opencv —modversion可以检验是否安装成功。<br>3.配置vscode：<br>需要修改c_cpp_properties.json，tasks.json和launch.json<br>1&gt;按下ctrl+shift+p搜索Edit Configuration进入编辑配置（JSON），在includePath中新增opencv4的路径/usr/local/include/opencv4<br>2&gt;ctrl+shift+p搜索Tasks:Configure Task后选择用g++编译，修改tasks.json为：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;tasks&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;cppbuild&quot;,</span><br><span class="line">            &quot;label&quot;: &quot;C/C++: g++ build active file&quot;,  /* 与launch.json文件里的preLaunchTask的内容保持一致 */</span><br><span class="line">            &quot;command&quot;: &quot;/usr/bin/g++&quot;,</span><br><span class="line">            &quot;args&quot;: [</span><br><span class="line">                &quot;-std=c++11&quot;,</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                //&quot;$&#123;file&#125;&quot;,   /* 编译单个文件 */</span><br><span class="line">                &quot;$&#123;fileDirname&#125;/*.cpp&quot;,  /* 编译多个文件 */</span><br><span class="line">                &quot;-o&quot;,</span><br><span class="line">                &quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;&quot;,  /* 输出文件路径 */</span><br><span class="line"> </span><br><span class="line">                /* 项目所需的头文件路径 */</span><br><span class="line">                &quot;-I&quot;,&quot;$&#123;workspaceFolder&#125;/&quot;,</span><br><span class="line">                &quot;-I&quot;,&quot;/usr/local/include/&quot;,</span><br><span class="line">                &quot;-I&quot;,&quot;/usr/local/include/opencv4/&quot;,</span><br><span class="line">                &quot;-I&quot;,&quot;/usr/local/include/opencv4/opencv2&quot;,</span><br><span class="line"> </span><br><span class="line">                /* 项目所需的库文件路径 */</span><br><span class="line">                &quot;-L&quot;, &quot;/usr/local/lib&quot;,</span><br><span class="line"> </span><br><span class="line">                /* OpenCV的lib库 */</span><br><span class="line">                &quot;/usr/local/lib/libopencv_*&quot;,</span><br><span class="line"> </span><br><span class="line">            ],</span><br><span class="line">            &quot;options&quot;: &#123;</span><br><span class="line">                &quot;cwd&quot;: &quot;$&#123;fileDirname&#125;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;problemMatcher&quot;: [</span><br><span class="line">                &quot;$gcc&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;group&quot;: &#123;</span><br><span class="line">                &quot;kind&quot;: &quot;build&quot;,</span><br><span class="line">                &quot;isDefault&quot;: true</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;detail&quot;: &quot;Task generated by Debugger.&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;version&quot;: &quot;2.0.0&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>2&gt;<br>3&gt;按下ctrl+shift+D后点击创建项目的launch.json文件，修改为：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;g++ - Build and debug active file&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;cppdbg&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;&quot;,  //程序文件路径</span><br><span class="line">            &quot;args&quot;: [],  //程序运行需传入的参数</span><br><span class="line">            &quot;stopAtEntry&quot;: false,</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;fileDirname&#125;&quot;,</span><br><span class="line">            &quot;environment&quot;: [],</span><br><span class="line">            &quot;externalConsole&quot;: true,   //运行时是否显示控制台窗口</span><br><span class="line">            &quot;MIMode&quot;: &quot;gdb&quot;,</span><br><span class="line">            &quot;setupCommands&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,</span><br><span class="line">                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,</span><br><span class="line">                    &quot;ignoreFailures&quot;: true</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;preLaunchTask&quot;: &quot;C/C++: g++ build active file&quot;,</span><br><span class="line">            &quot;miDebuggerPath&quot;: &quot;/usr/bin/gdb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>4.编写CMakeLists.txt文件：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.8)</span><br><span class="line">project(test)</span><br><span class="line"></span><br><span class="line"># 查找OpenCV包</span><br><span class="line">find_package(OpenCV REQUIRED)</span><br><span class="line"></span><br><span class="line"># 包含OpenCV头文件目录</span><br><span class="line">include_directories($&#123;OpenCV_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line">add_executable(TEST src/test.cpp)</span><br><span class="line"></span><br><span class="line"># 将OpenCV库链接到目标</span><br><span class="line">target_link_libraries(TEST $&#123;OpenCV_LIBS&#125;)</span><br></pre></td></tr></table></figure><br>5.至此，完成配置<br>在ubuntu中启用与禁用anaconda：<br>sudo gedit ~/.bashrc打开.bashrc文件<br>启用则写入：export PATH=~/anaconda3/bin:$PATH<br>要实现bash环境的自动启动写入：source ~/anaconda3/bin/activate<br>否则需要在终端中键入source activate才能进入<br>禁用则把上述两行代码注释掉即可<br>最后记得source ~/.bashrc刷新文件</p>
<h1 id="常用的anaconda命令："><a href="#常用的anaconda命令：" class="headerlink" title="常用的anaconda命令："></a>常用的anaconda命令：</h1><p>查询虚拟环境：conda env list<br>创建虚拟环境：conda create -n name python=3.xx<br>删除虚拟环境：conda remove -n name —all<br>进入虚拟环境：conda activate name<br>退出虚拟环境：conda deactivate</p>
<h1 id="基础知识："><a href="#基础知识：" class="headerlink" title="基础知识："></a>基础知识：</h1><p>二值图像：<br>一幅二值图像的二维矩阵仅由0、1两个值构成，“0”代表黑色，“1”代表白色。由于每一像素（矩阵中每一元素）取值仅有0、1两种可能，所以计算机中二值图像的数据类型通常为1个二进制位。二值图像通常用于文字、线条图的扫描识别（OCR）和掩膜图像的存储。<br>灰度图：<br>每个像素只有一个采样颜色的图像，这类图像通常显示为从最暗黑色到最亮的白色的灰度，尽管理论上这个采样可以任何颜色的不同深浅，甚至可以是不同亮度上的不同颜色。灰度图像与黑白图像不同，在计算机图像领域中黑白图像只有黑色与白色两种颜色；但是，灰度图像在黑色与白色之间还有许多级的颜色深度。灰度图像经常是在单个电磁波频谱如可见光内测量每个像素的亮度得到的，用于显示的灰度图像通常用每个采样像素8位的非线性尺度来保存，这样可以有256级灰度（如果用16位，则有65536级）。<br>彩色图：<br>每个像素通常是由红（R）、绿（G）、蓝（B）三个分量来表示的，分量介于（0，255）。RGB图像与索引图像一样都可以用来表示彩色图像。与索引图像一样，它分别用红（R）、绿（G）、蓝（B）三原色的组合来表示每个像素的颜色。但与索引图像不同的是，RGB图像每一个像素的颜色值（由RGB三原色表示）直接存放在图像矩阵中，由于每一像素的颜色需由R、G、B三个分量来表示，M、N分别表示图像的行列数，三个M x N的二维矩阵分别表示各个像素的R、G、B三个颜色分量。RGB图像的数据类型一般为8位无符号整形，通常用于表示和存放真彩色图像。</p>
<h1 id="一、图像IO操作"><a href="#一、图像IO操作" class="headerlink" title="一、图像IO操作"></a>一、图像IO操作</h1><p>1.读取图像：cv.imread(filename,flags)<br>参数：filename：要读取的图像及其路径<br>flags：读取方式<br>cv.IMREAD_COLOR：彩色模式，忽略透明度（默认参数）<br>cv.IMREAD_GRAYSCALE：灰度模式<br>cv.IMREAD_UNCHANGED：彩色模式，考虑透明度<br>返回值：图片名，numpy类型用于存储图片<br>2.显示图像：cv.imshow(winname,mat)<br>参数：winname：显示图像的窗口名称，以字符串类型表示<br>mat：要加载的图像<br>返回值：无<br>在调用显示图像的API后，要调用cv.waitKey()给图像绘制留下时间。<br>3.保存图像：cv.imwrite(filename,img)<br>参数：filename：保存的文件名机器路径<br>img：要保存的图片名<br>返回值：无</p>
<h1 id="二、绘制几何图形："><a href="#二、绘制几何图形：" class="headerlink" title="二、绘制几何图形："></a>二、绘制几何图形：</h1><p>1.绘制直线：cv.line(img,start,end,color,thickness)<br>参数：img:要绘制直线的图像<br>Start,end: 直线的起点和终点<br>color: 线条的颜色<br>Thickness: 线条宽度<br>返回值：无<br>2.绘制圆形：cv.circle(img,centerpoint, r, color, thickness)<br>参数：img:要绘制圆形的图像<br>Centerpoint, r: 圆心和半径<br>color: 线条的颜色<br>Thickness: 线条宽度，为-1时生成闭合图案并填充颜色<br>返回值：无<br>3.绘制矩形：cv.rectangle(img,leftupper,rightdown,color,thickness)<br>参数：img:要绘制矩形的图像<br>Leftupper, rightdown: 矩形的左上角和右下角坐标<br>color: 线条的颜色<br>Thickness: 线条宽度<br>返回值：无<br>4.添加文字：cv.putText(img,text,station, font, fontsize,color,thickness,lineType)<br>参数：img: 图像<br>text：要写入的文本数据<br>station：文本的放置位置<br>font：字体<br>Fontsize :字体大小<br>color：颜色<br>Thickness: 线条宽度<br>lineType：线渲染，值越大边缘越光滑，例如cv.LINE_8和cv.LINE_AA</p>
<h1 id="三、获取并修改图像中的像素点"><a href="#三、获取并修改图像中的像素点" class="headerlink" title="三、获取并修改图像中的像素点"></a>三、获取并修改图像中的像素点</h1><p>我们可以通过行和列的坐标值获取该像素点的像素值。对于BGR图像，它返回一个蓝，绿，红值的数组。对于灰度图像，仅返回相应的强度值。使用相同的方法对像素值进行修改。<br>px = img[100,100]                # 获取某个像素点的值<br>blue = img[100,100,0]            # 仅获取蓝色通道的强度值<br>img[100,100] = [255,255,255]    # 修改某个位置的像素值</p>
<h1 id="四、获取图像的属性："><a href="#四、获取图像的属性：" class="headerlink" title="四、获取图像的属性："></a>四、获取图像的属性：</h1><p>图像属性包括行数，列数和通道数，图像数据类型，像素数等。对应的API如下所示：<br>其中shape返回元组(高度，宽度，通道数)，size返回高度<em>宽度</em>通道数</p>
<h1 id="五、图像通道的拆分与合并"><a href="#五、图像通道的拆分与合并" class="headerlink" title="五、图像通道的拆分与合并"></a>五、图像通道的拆分与合并</h1><p>有时需要在B，G，R通道图像上单独工作。在这种情况下，需要将BGR图像分割为单个通道。或者在其他情况下，可能需要将这些单独的通道合并到BGR图像。<br>b,g,r = cv.split(img)            # 通道拆分<br>img = cv.merge((b,g,r))        # 通道合并</p>
<h1 id="六、色彩空间的转变：cv-cvtColor-img，code"><a href="#六、色彩空间的转变：cv-cvtColor-img，code" class="headerlink" title="六、色彩空间的转变：cv.cvtColor(img，code)"></a>六、色彩空间的转变：cv.cvtColor(img，code)</h1><p>参数：img: 进行颜色空间转换的图像<br>code: 转换类型<br>cv.COLOR_BGR2GRAY : BGR转Gray<br>cv.COLOR_BGR2HSV: BGR转HSV</p>
<h1 id="七、图像的四则运算与混合操作："><a href="#七、图像的四则运算与混合操作：" class="headerlink" title="七、图像的四则运算与混合操作："></a>七、图像的四则运算与混合操作：</h1><p>OpenCV的四则运算是饱和操作，即存在对应的上下限，例如在RGB图中只可能于[0,255]<br>dst=cv.add(x,y)                            #图像的加法<br>dst=cv.addWeighted(img1,α,img2,β,γ)    #dst = α⋅img1 + β⋅img2 + γ</p>
<h1 id="八、几何变换："><a href="#八、几何变换：" class="headerlink" title="八、几何变换："></a>八、几何变换：</h1><p>1.图像缩放：cv2.resize(src,dsize,fx=0,fy=0,interpolation=cv2.INTER_LINEAR)<br>参数：src : 输入图像<br>dsize: 绝对尺寸，直接指定调整后图像的大小<br>fx,fy: 相对尺寸，将dsize设置为None，然后将fx和fy设置为比例因子即可<br>interpolation：插值方法</p>
<p>2.图像旋转（仿射变换的一部分）：cv.warpAffine(img,M,dsize)<br>参数：img: 输入图像<br>M：2∗3移动矩阵，通过cv.getRotationMatrix2D(center, angle, scale)求解<br>center：旋转中心<br>angle：旋转角度<br>scale：缩放比例<br>dsize: 输出图像的大小<br>3.图像平移（仿射变换的一部分）：cv.warpAffine(img,M,dsize)<br>参数：img: 输入图像<br>M：2∗3移动矩阵，np.float32([[1,0,tx],[0,1,ty]])<br>dsize: 输出图像的大小<br>4.仿射变换：cv.warpAffine(img,M,dsize)<br>图像的仿射变换涉及到图像的形状位置角度的变化，是深度学习预处理中常到的功能,仿射变换主要是对图像的缩放，旋转，翻转和平移等操作的组合。<br>以下图为例解释图像的仿射变换，图1中的点1, 2 和 3 与图二中三个点一一映射, 仍然形成三角形, 但形状已经大大改变，通过这样两组三点（感兴趣点）就可以得到一组仿射变换，把这个仿射变换应用到图像中所有的点中，就完成了图像的仿射变换。</p>
<p>参数：img: 输入图像<br>M：2∗3移动矩阵，通过cv.getAffineTransform(pts1,pts2)求解，其中pts1和      pts2分别是仿射前后三个点的位置，用np.float32([[x,y,z],[x’,y’,z’]])表示<br>dsize: 输出图像的大小<br>5.透射变换：cv.warpPerspective(img,T,dsize)<br>透射变换是视角变化的结果，是指利用透视中心、像点、目标点三点共线的条件，按透视旋转定律使承影面（透视面）绕迹线（透视轴）旋转某一角度，破坏原有的投影光线束，仍能保持承影面上投影几何图形不变的变换。</p>
<p>参数：img: 输入图像<br>T：3∗3透视变换矩阵，通过cv.getPerspectiveTransform(pts1,pts2)求解，      其中pts1和pts2分别是透射前后四个点的位置（任意三个不共线），<br>用np.float32([[x,y,z,a],[x’,y’,z’,a’]])表示<br>dsize: 输出图像的大小<br>6.图像金字塔：cv.pyrUp/Down(img) #上采样/下采样<br>图像金字塔是图像多尺度表达的一种，最主要用于图像的分割，是一种以多分辨率来解释图像的有效但概念简单的结构。图像金字塔用于机器视觉和图像压缩，一幅图像的金字塔是一系列以金字塔形状排列的分辨率逐步降低，且来源于同一张原始图的图像集合。其通过梯次向下采样获得，直到达到某个终止条件才停止采样。金字塔的底部是待处理图像的高分辨率表示，而顶部是低分辨率的近似，层级越高，图像越小，分辨率越低。</p>
<h1 id="九、形态学操作："><a href="#九、形态学操作：" class="headerlink" title="九、形态学操作："></a>九、形态学操作：</h1><p>1.腐蚀：cv.erode(img,kernel,iterations)<br>腐蚀使原图中的高亮区域被蚕食，效果图有比原图更小的高亮区域，是求局部最小值的操作。<br>腐蚀的作用是消除物体边界点，使目标缩小，可以消除小于结构元素的噪声点。<br>具体操作是：用一个核结构扫描图像中的每一个像素，用图中的每一个与核结构相同大小的像素块与核结构像素做“与”操作，如果都为1，则该像素块的中心点为1，否则为0。如下图所示，结构A被核结构B腐蚀后：（图有误，点(2,3)应为白色）</p>
<p>参数：img: 要处理的图像<br>kernel: 核结构<br>iterations: 腐蚀的次数，默认是1<br>2.膨胀： cv.dilate(img,kernel,iterations)<br>膨胀使图像中高亮部分扩张，效果图拥有比原图更大的高亮区域，是求局部最大值的操作。<br>膨胀的作用是将与物体接触的所有背景点合并到物体中，使目标增大，可添补目标中的孔洞。<br>具体操作是：用一个核结构扫描图像中的每一个像素，用图中的每一个与核结构相同大小的像素块与核结构像素做“或”操作，如果都为0，则该像素块的中心点为0，否则为1。如下图所示，结构A被核结构B膨胀后：</p>
<p>参数的意义和腐蚀一样，在此不再赘述。</p>
<p>3.开运算和闭运算：cv.morphologyEx(img, op, kernel)<br>开运算是先腐蚀后膨胀，其作用是分离物体，消除小区域；其特点是消除噪点，去除小的干扰块，而不影响原来的图像。闭运算则与开运算相反，是先膨胀后腐蚀，作用是消除闭合物体里面的孔洞，特点是可以填充闭合区域。</p>
<p>参数：img: 要处理的图像<br>op: 若进行开运算，则设为cv.MORPH_OPEN<br>若进行闭运算，则设为cv.MORPH_CLOSE<br>Kernel： 核结构<br>4.礼帽与黑帽运算：cv.morphologyEx(img, op, kernel)<br>礼帽运算是原图像与开运算的结果图之差，黑帽运算是原图像与闭运算的结果图之差。<br>因为开运算带来的结果是放大了裂缝或者局部低亮度的区域，因此，从原图中减去开运算后的图，得到的效果图突出了比原图轮廓周围的区域更明亮的区域，故礼帽运算用来分离比邻近点亮一些的斑块。当一幅图像具有大幅的背景的时候，而微小物品比较有规律的情况下，可以使用礼帽运算进行背景提取。而黑帽运算后的效果图突出了比原图轮廓周围的区域更暗的区域，故黑帽运算用来分离比邻近点暗一些的斑块。<br>参数：img: 要处理的图像<br>op: 若进行礼帽运算，则设为cv.MORPH_TOPHAT<br>若进行黑帽运算，则设为cv.MORPH_BLACKHAT<br>Kernel： 核结构<br>最后来看一些示例：</p>
<h1 id="十、图像噪声"><a href="#十、图像噪声" class="headerlink" title="十、图像噪声"></a>十、图像噪声</h1><p>1.椒盐噪声：cv.addSaltAndPepperNoise(img, noise_den, noise_val)<br>椒盐噪声也称为脉冲噪声，是图像中经常见到的一种噪声，它是一种随机出现的白点或者黑点，可能是亮的区域有黑色像素或是在暗的区域有白色像素（或是两者皆有）。椒盐噪声的成因可能是影像讯号受到突如其来的强烈干扰而产生、类比数位转换器或位元传输错误等。例如失效的感应器导致像素值为最小值，饱和的感应器导致像素值为最大值。</p>
<p>参数：img：源图像<br>noise_den：噪声密度（噪声像素占总像素的比例）<br>noise_val：噪声强度（噪声像素值，可以是0或255）。<br>2.高斯噪声：<br>高斯噪声是指噪声密度函数服从高斯分布的一类噪声。由于高斯噪声在空间和频域中数学上的易处理性，这种噪声(也称为正态噪声)模型经常被用于实践中。高斯随机变量z的概率密度函数由下式给出：</p>
<p>其中z表示灰度值，μ表示z的平均值或期望值，σ表示z的标准差。标准差的平方σ2​​称为z的方差。高斯函数的曲线如图所示。</p>
<h1 id="十一、图像平滑："><a href="#十一、图像平滑：" class="headerlink" title="十一、图像平滑："></a>十一、图像平滑：</h1><p>图像平滑从信号处理的角度看就是去除其中的高频信息，保留低频信息。因此我们可以对图像实施低通滤波。低通滤波可以去除图像中的噪声，对图像进行平滑。<br>根据滤波器的不同可分为均值滤波，高斯滤波，中值滤波， 双边滤波。<br>1.均值滤波：cv.blur(src, ksize, anchor, borderType)<br>均值滤波是一种典型的线性滤波算法。它对一个滑动窗口内的所有像素的灰度级求平均值，然后用这个平均值来代替窗口中心像素的原灰度级。这种方法在处理图像时，实质上是将噪声的灰度值也代入了均值中，可能导致噪声向周围扩散，使得图像变得模糊，边缘不清晰。<br>参数：src：输入图像<br>ksize：卷积核的大小<br>anchor：默认值 (-1,-1) ，表示核中心<br>borderType：边界类型<br>2.高斯滤波：cv.GaussianBlur(src,ksize,sigmaX,sigmay,borderType)<br>二维高斯是构建高斯滤波器的基础，其概率分布函数如下所示：</p>
<p>G(x,y)的分布是一个突起的帽子的形状。这里的σ可以看作两个值，一个是x方向的标准差σx，另一个是y方向的标准差σy。当σx和σy取值越大，整个形状趋近于扁平；当σx和σy越小，整个形状越突起。</p>
<p>正态分布是一种钟形曲线，越接近中心，取值越大，越远离中心，取值越小。计算平滑结果时，只需要将中心点作为原点，其他点按照其在正态曲线上的位置归一化后分配权重得到一个加权平均值，将该加权平均值赋给中心点即可。高斯平滑在从去除高斯噪声方面非常有效。<br>参数：src: 输入图像<br>ksize:高斯卷积核的大小，注意卷积核的宽度和高度都应为奇数，且可以不同<br>sigmaX: 水平方向的标准差<br>sigmaY: 垂直方向的标准差，默认值为0，表示与sigmaX相同<br>borderType:填充边界类型<br>3.中值滤波：cv.medianBlur(src, ksize )<br>中值滤波采用像素点邻域灰度值的中位数来代替该像素点的灰度值。中值滤波对椒盐噪声来说尤其有用，因为它不依赖于邻域内那些与典型值差别很大的值。<br>参数：src：输入图像<br>ksize：卷积核的大小</p>
<h1 id="十二、直方图："><a href="#十二、直方图：" class="headerlink" title="十二、直方图："></a>十二、直方图：</h1><p>直方图是对数据进行统计的一种方法，并且将统计值组织到一系列实现定义好的bin当中。bin为直方图中经常用到的一个概念，其数值是从数据中计算出的特征统计量，这些数据可以是诸如梯度、方向、色彩或任何其他特征。<br>图像直方图（Image Histogram）是用以表示数字图像中亮度分布的直方图，标绘了图像中每个亮度值的像素个数。这种直方图中，横坐标的左侧为较暗的区域，而右侧为较亮的区域。因此一张较暗图片的直方图中的数据多集中于左侧和中间部分，而整体明亮、只有少量阴影的图像则相反。直方图是根据灰度图进行绘制的，假设有一张图像的信息（灰度值 0 - 255，已知数字的范围包含 256 个值，于是可以按一定规律将这个范围分割成子区域（也就是 bins），[0,255]=[0,15]⋃[16,30]⋯⋃[240,255][0,255]=[0,15]⋃[16,30]⋯⋃[240,255]，然后再统计每一个 bin(i) 的像素数目。可以得到下图（其中 x 轴表示 bin，y 轴表示各个 bin 中的像素个数）：</p>
<p>直方图的一些术语和细节：<br>dims：需要统计的特征数目。在上例中，dims = 1 ，因为仅仅统计了灰度值。<br>bins：每个特征空间子区段的数目，在上例中， bins = 16。<br>range：要统计特征的取值范围。在上例中，range = [0, 255]。<br>1.直方图的计算：<br>cv2.calcHist(images,channels,mask,histSize,ranges[,hist[,accumulate]])<br>参数：images: 原图像。当传入函数时应该用中括号 [] 括起来，例如：[img]。<br>channels: 如果输入图像是灰度图，它的值就是 [0]；如果是彩色图像的话，传入      的参数可以是 [0]，[1]，[2] 它们分别对应着通道 B，G，R。 　　<br>mask: 掩模图像。要统计整幅图像的直方图就把它设为 None。但是如果你想统计      图像某一部分的直方图的话，你就需要制作一个掩模图像，并使用它。<br>histSize:BIN 的数目。也应该用中括号括起来，例如：[256]。 　　<br>ranges: 像素值范围，通常为 [0，256]<br>返回值：一个规模为1*ranges/bins的矩阵，其中每个值分别是对应bins的像素个数<br>2.掩膜：掩膜是用选定的图像、图形或物体，对要处理的图像进行遮挡，来控制图像处理的区域。在数字图像处理中，我们通常使用二维矩阵数组进行掩膜。掩膜是由0到255组成一个二进制图像，利用该掩膜图像要处理的图像进行掩膜，其中255值的区域被处理，0 值区域被屏蔽，不会处理。中间值则是部分掩膜。<br>我们使用cv.calcHist()来查找完整图像的直方图，如果要查找图像某些区域的直方图，只需在要查找直方图的区域上创建一个白色的掩膜图像，否则创建黑色，然后将其作为掩码mask传递即可。<br>3.直方图均衡化：dst = cv.equalizeHist(img)<br>如果一副图像中的大多数像素点的像素值都集中在某一个小的灰度值值范围之内会怎样呢？如果一幅图像整体很亮，那所有的像素值的取值个数应该都会很高。所以应该把它的直方图做一个横向拉伸，就可以扩大图像像素值的分布范围，提高图像的对比度，这就是直方图均衡化要做的事情。直方图均衡化是把原始图像的灰度直方图从比较集中的某个灰度区间变成在更广泛灰度范围内的分布。直方图均衡化就是对图像进行非线性拉伸，重新分配图像像素值，使一定灰度范围内的像素数量大致相同。这种方法提高图像整体的对比度，特别是有用数据的像素值分布比较接近时，在X光图像中使用广泛，可以提高骨架结构的显示，另外在曝光过度或不足的图像中可以更好的突出细节。<br>参数：img: 灰度图像<br>返回值：均衡化后的结果<br>4.自适应直方图均衡化：cv.createCLAHE(clipLimit, tileGridSize)<br>上述的直方图均衡，我们考虑的是图像的全局对比度。的确在进行完直方图均衡化之后，图片背景的对比度被改变了，在许多情况下，这样做的效果并不好。为了解决这个问题，需要使用自适应的直方图均衡化。此时，整幅图像会被分成很多小块，这些小块被称为tiles（默认8x8），然后再对每一个小块分别进行直方图均衡化。所以在每一个的区域中，直方图会集中在某一个小的区域中。如果有噪声的话，噪声会被放大。为了避免这种情况的出现要使用对比度限制。对于每个小块来说，如果直方图中的 bin 超过对比度的上限的话，就把其中的像素点均匀分散到其他 bins 中，然后在进行直方图均衡化。最后，为了除每一个小块之间的边界，再使用双线性差值，对每一小块进行拼接。<br>参数：clipLimit: 对比度限制，默认是40<br>tileGridSize: 分块的大小，默认为8∗8<br>返回值：自适应均衡化的对象，需要应用于图像cl1 = clahe.apply(img)</p>
<h1 id="十三、边缘检测："><a href="#十三、边缘检测：" class="headerlink" title="十三、边缘检测："></a>十三、边缘检测：</h1><p>边缘检测是图像处理和计算机视觉中的基本问题，边缘检测的目的是标识数字图像中亮度变化明显的点。图像属性中的显著变化通常反映了属性的重要事件和变化。<br>图像边缘检测大幅度地减少了数据量，并且剔除了可以认为不相关的信息，保留了图像重要的结构属性。有许多方法用于边缘检测，它们的绝大部分可以划分为两类：基于搜索和基于零穿越。<br>基于搜索：通过寻找图像一阶导数中的最大值来检测边界，然后利用计算结果估计边缘的局部方向，通常采用梯度的方向，并利用此方向找到局部梯度模的最大值，代表算法是Sobel算子和Scharr算子。<br>基于零穿越：通过寻找图像二阶导数零穿越来寻找边界，代表算法是Laplacian算子。<br>1.sobel算子：cv2.Sobel(src, depth, dx, dy, dst, ksize, scale, delta, borderType)<br>参数：src：传入的图像<br>depth: 图像的深度<br>dx和dy: 指求导的阶数，0表示这个方向上没有求导，取值为0、1。<br>ksize: 是Sobel算子（卷积核）的大小，必须为奇数1、3、5、7，默认为3。<br>如果ksize=-1，就演变成为3x3的Scharr算子。<br>scale：缩放导数的比例常数，默认情况为没有伸缩系数。<br>borderType：图像边界的模式，默认值为cv2.BORDER_DEFAULT。<br>Sobel函数求完导数后会有负值，还有会大于255的值。而原图像是uint8，即8位无符号数，所以Sobel建立的图像位数不够，会有截断。因此要使用16位有符号的数据类型，即cv2.CV_16S。处理完图像后，再使用cv2.convertScaleAbs()函数将其转回原来的uint8格式，否则图像无法显示。Sobel算子是在两个方向计算的，最后还需要用cv2.addWeighted( )函数将其组合起来。<br>Scale_abs = cv2.convertScaleAbs(x)  # 格式转换函数<br>result = cv2.addWeighted(src1, alpha, src2, beta) # 图像混合</p>
<p>2.Laplacian算子：cv2.Laplacian(src,depth,dst,ksize,scale, delta, borderType)</p>
<p>参数：src: 需要处理的图像，<br>depth: 图像的深度，-1表示采用的是原图像相同的深度，注意目标图像的深度必须      大于等于原图像的深度；<br>ksize：算子的大小，即卷积核的大小，必须为1,3,5,7。<br>3.Canny算子：cv2.Canny(image, threshold1, threshold2)<br>Canny 边缘检测算法是一种非常流行的边缘检测算法，被认为是最优的边缘检测算法。<br>Canny边缘检测算法由4步构成，分别介绍如下：<br>①噪声去除：由于边缘检测很容易受到噪声的影响，所以首先使用5*5高斯滤波器去除噪声，在图像平滑那一章节中已经介绍过。<br>②计算图像梯度：对平滑后的图像使用Sobel算子计算水平方向和竖直方向的一阶导数（Gx 和 Gy）。根据得到的这两幅梯度图（Gx 和 Gy）找到边界的梯度和方向，公式如下:</p>
<p>如果某个像素点是边缘，则其梯度方向总是垂直与边缘垂直。梯度方向被归为四类：垂直，水平，和两个对角线方向。<br>③非极大值抑制：在获得梯度的方向和大小之后，对整幅图像进行扫描，去除那些非边界上的点。对每一个像素进行检查，看这个点的梯度是不是周围具有相同梯度方向的点中最大的。如下图所示：</p>
<p>A点位于图像的边缘，在其梯度变化方向，选择像素点B和C，用来检验A点的梯度是否为极大值，若为极大值，则进行保留，否则A点被抑制，最终的结果是具有“细边”的二进制图像。<br>④滞后阈值：现在要确定真正的边界。我们设置两个阈值：minVal和maxVal。当图像的灰度梯度高于maxVal时被认为是真的边界，低于minVal的边界会被抛弃。如果介于两者之间的话，就要看这个点是否与某个被确定为真正的边界点相连，如果是就认为它也是边界点，如果不是就抛弃。<br>参数：image:灰度图，<br>threshold1: minval，较小的阈值将间断的边缘连接起来<br>threshold2: maxval，较大的阈值检测图像中明显的边缘</p>
<h1 id="十四、模板匹配：cv-matchTemplate-img-template-method"><a href="#十四、模板匹配：cv-matchTemplate-img-template-method" class="headerlink" title="十四、模板匹配：cv.matchTemplate(img,template,method)"></a>十四、模板匹配：cv.matchTemplate(img,template,method)</h1><p>所谓的模板匹配，就是在给定的图片中查找和模板最相似的区域，该算法的输入包括模板和图片，整个任务的思路就是按照滑窗的思路不断的移动模板图片，计算其与图像中对应区域的匹配度，最终将匹配度最高的区域选择为最终的结果。其实现流程是：<br>准备两幅图像：原图像(I)和模板(T)，滑动模板图像和原图像进行比对，将模板块每次移动一个像素 (从左往右，从上往下)，在每一个位置都计算与模板图像的相似程度。<br>对于每一个位置将计算的相似结果保存在结果矩阵（R）中。查找R最大值所在的位置，那么该位置对应的区域就被认为是最匹配的。对应的区域就是以该点为顶点，长宽和模板图像一样大小的矩阵。<br>参数：img: 要进行模板匹配的图像<br>Template：模板<br>method：实现模板匹配的算法，主要有：<br>平方差匹配(CV_TM_SQDIFF)：利用模板与图像之间的平方差进行匹配，最好的匹配    是0，匹配越差，匹配的值越大。<br>相关匹配(CV_TM_CCORR)：利用模板与图像间的乘法进行匹配，数值越大表示匹配    程度较高，越小表示匹配效果差。<br>相关系数匹配(CV_TM_CCOEFF)：利用模板与图像间的相关系数匹配，1表示完美    的匹配，-1表示最差的匹配。<br>完成匹配后，使用cv.minMaxLoc()方法查找最大值所在的位置即可。如果使用平方差作为比较方法，则最小值位置是最佳匹配位置。<br>需要注意的是，模板匹配不适用于尺度变换，视角变换后的图像我们需要使用关键点匹配算法，比较经典的关键点检测算法包括SIFT和SURF等，主要的思路是首先通过关键点检测算法获取模板和测试图片中的关键点；然后使用关键点匹配算法处理即可，这些关键点可以很好的处理尺度变化、视角变换、旋转变化、光照变化等，具有很好的不变性。</p>
<h1 id="十五、霍夫变换："><a href="#十五、霍夫变换：" class="headerlink" title="十五、霍夫变换："></a>十五、霍夫变换：</h1><p>霍夫变换常用来提取图像中的直线和圆等几何形状，如下图所示：</p>
<p>霍夫线检测：cv.HoughLines(img, rho, theta, threshold)<br>参数：img: 检测的图像，要求是二值化的图像<br>rho、theta: ρ 和θ的精确度<br>threshold: 阈值，只有累加器中的值高于该阈值时才被认为是直线。<br>霍夫圆检测：OpenCV中使用霍夫梯度法进行圆形的检测。原则上霍夫变换可以检测任何形状，但复杂的形状需要的参数就多，霍夫空间的维数就多，因此在程序实现上所需的内存空间以及运行效率上都不利于把标准霍夫变换应用于实际复杂图形的检测中。霍夫梯度法是霍夫变换的改进，它的目的是减小霍夫空间的维度，提高效率。由于霍夫圆检测对噪声比较敏感，所以首先对图像进行中值滤波。<br>cv.HoughCircles(image, method, dp, minDist, param1, param2, minRadius,<br>maxRadius)<br>参数：image：输入图像，应输入灰度图像<br>method：使用霍夫变换圆检测的算法，它的参数是CV_HOUGH_GRADIENT<br>dp：霍夫空间的分辨率，dp=1时表示霍夫空间与输入图像空间的大小一致，dp=2      时霍夫空间是输入图像空间的一半，以此类推<br>minDist为圆心之间的最小距离，如果检测到的两个圆心之间距离小于该值，则认      为它们是同一个圆心<br>param1：边缘检测时使用Canny算子的高阈值，低阈值是高阈值的一半。<br>param2：检测圆心和确定半径时所共有的阈值<br>minRadius和maxRadius为所检测到的圆半径的最小值和最大值<br>返回值：输出圆向量，包括三个浮点型的元素——圆心横坐标，圆心纵坐标和圆半径</p>
<h1 id="十六、角点检测："><a href="#十六、角点检测：" class="headerlink" title="十六、角点检测："></a>十六、角点检测：</h1><p>角点是图像很重要的特征,对图像图形的理解和分析有很重要的作用。角点在三维场景重建运动估计，目标跟踪、目标识别、图像配准与匹配等计算机视觉领域起着非常重要的作用。<br>1.Harris角点检测：cv.cornerHarris(src, blockSize, ksize, k)<br>Harris角点检测的思想是通过图像的局部的小窗口观察图像，角点的特征是窗口沿任意方向移动都会导致图像灰度的明显变化<br>参数：img：数据类型为 ﬂoat32 的输入图像。<br>blockSize：角点检测中要考虑的邻域大小。<br>ksize：sobel求导使用的核大小<br>k：角点检测方程中的自由参数，取值参数为 [0.04，0.06].<br>2.Shi-Tomasi角点检测：<br>cv2.goodFeaturesToTrack ( image, maxcorners, qualityLevel, minDistance )<br>Shi-Tomasi算法是对Harris角点检测算法的改进，一般会比Harris算法得到更好的角点。Harris 算法的角点响应函数是将矩阵 M 的行列式值与 M 的迹相减，利用差值判断是否为角点。后来Shi 和Tomasi 提出改进的方法是，若矩阵M的两个特征值中较小的一个大于阈值，则认为他是角点。<br>参数：Image: 输入灰度图像<br>maxCorners : 获取角点数的数目。<br>qualityLevel：该参数指出最低可接受的角点质量水平，在0-1之间。<br>minDistance：角点之间最小的欧式距离，避免得到相邻特征点。<br>返回值：搜索到的角点，在这里所有低于质量水平的角点被排除掉，然后把合格的角点按质量排序，然后将质量较好的角点附近（小于最小欧式距离）的角点删掉，最后找到maxCorners个角点返回。<br>3.SIFT角点检测：前面两节我们介绍了Harris和Shi-Tomasi角点检测算法，这两种算法具有旋转不变性，但不具有尺度不变性，以下图为例，在左侧小图中可以检测到角点，但是图像被放大后，在使用同样的窗口，就检测不到角点了。所以，下面我们来介绍一种计算机视觉的算法，尺度不变特征转换即SIFT (Scale-invariant feature transform)。它用来侦测与描述影像中的局部性特征，它在空间尺度中寻找极值点，并提取出其位置、尺度、旋转不变量，此算法由 David Lowe在1999年所发表，2004年完善总结。应用范围包含物体辨识、机器人地图感知与导航、影像缝合、3D模型建立、手势辨识、影像追踪和动作比对等领域。SIFT算法的实质是在不同的尺度空间上查找关键点(特征点)，并计算出关键点的方向。SIFT所查找到的关键点是一些十分突出，不会因光照，仿射变换和噪音等因素而变化的点，如角点、边缘点、暗区的亮点及亮区的暗点等。<br>①实例化sift：sift = cv.xfeatures2d.SIFT_create()<br>②利用sift.detectAndCompute()检测关键点并计算：<br>kp,des = sift.detectAndCompute(gray,None)<br>参数：gray: 进行关键点检测的图像，注意是灰度图像<br>返回值：kp: 关键点信息，包括位置，尺度，方向信息<br>des: 关键点描述符，每个关键点对应128个梯度信息的特征向量<br>③将关键点检测结果绘制在图像上<br>cv.drawKeypoints(image, keypoints, outputimage, color, flags)<br>参数：image: 原始图像<br>keypoints：关键点信息，将其绘制在图像上<br>outputimage：输出图片，可以是原始图像<br>color：颜色设置，通过修改（b,g,r）的值,更改画笔的颜色<br>flags：绘图功能的标识设置<br>cv2.DRAW_MATCHES_FLAGS_DEFAULT：创建输出图像矩阵，使用现存的输出    图像绘制匹配对和特征点，对每一个关键点只绘制中间点<br>cv2.DRAW_MATCHES_FLAGS_DRAW_OVER_OUTIMG：不创建输出图像矩阵，    而是在输出图像上绘制匹配对<br>cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS：对每一个特征点绘制带大小和方向的关键点图形<br>cv2.DRAW_MATCHES_FLAGS_NOT_DRAW_SINGLE_POINTS：单点的特征点不被    绘制<br>4.SURF算法：<br>SIFT在图像的不变特征提取方面拥有无与伦比的优势，但并不完美，仍然存在实时性不高，有时特征点较少，对边缘光滑的目标无法准确提取特征点等缺陷，自SIFT算法问世以来，人们就一直对其进行优化和改进，其中最著名的就是SURF算法。<br>SURF算法的应用与SIFT一致，这里就不在赘述。</p>
<h1 id="十七、视频读写："><a href="#十七、视频读写：" class="headerlink" title="十七、视频读写："></a>十七、视频读写：</h1><p>1.读取视频：cv.VideoCapture(filepath)<br>参数：filepath: 视频文件路径<br>2.获取视频的属性：cap.get(propId)<br>参数：propId: 视频的某个属性，具体见下</p>
<p>3.修改视频的属性：cap.set(propId，value)<br>参数：proid: 属性的索引，与上面的表格相对应<br>value: 修改后的属性值<br>4.判断图像是否读取成功：cap.isOpened()<br>5.获取视频的一帧图像：ret, frame = cap.read()<br>参数：ret: 若获取成功返回True，获取失败，返回False<br>Frame: 获取到的某一帧的图像<br>6.调用cv.imshow()显示图像，在显示图像时使用cv.waitkey()设置适当的持续时间，如果太低视频会播放的非常快，如果太高就会播放的非常慢，通常情况下设置25ms就可以。<br>7.释放视频资源：cap.release()<br>8.保存视频：cv2.VideoWriter(filename,fourcc, fps, frameSize)<br>参数：filename：视频保存的位置<br>fourcc：指定视频编解码器的4字节代码<br>fps：帧率<br>frameSize：帧大小<br>设置视频的编解码器，如下所示，retval = cv2.VideoWriter_fourcc( c1, c2, c3, c4 )<br>参数：c1,c2,c3,c4: 是视频编解码器的4字节代码，在fourcc.org中找到可用代码列表，      与平台紧密相关，常用的有：<br>在Windows中：DIVX（.avi）<br>在OS中：MJPG（.mp4），DIVX（.avi），X264（.mkv）。</p>
<h1 id="十八、视频追踪："><a href="#十八、视频追踪：" class="headerlink" title="十八、视频追踪："></a>十八、视频追踪：</h1><p>1.meanshift算法：cv.meanShift(probImage, window, criteria)<br>假设你有一堆点集，还有一个小的窗口，这个窗口可能是任意形状的，现在你要移动这个窗口到点集密度最大的区域当中。</p>
<p>最开始的窗口是蓝色圆环的区域，命名为C1。蓝色圆环的圆心用一个蓝色的矩形标注，命名为C1_o。而窗口中所有点的点集构成的质心在蓝色圆形点C1_r处，显然圆环的形心和质心并不重合。所以，移动蓝色的窗口，使得形心与之前得到的质心重合。在新移动后的圆环的区域当中再次寻找圆环当中所包围点集的质心，然后再次移动，通常情况下，形心和质心是不重合的。不断执行上面的移动过程，直到形心和质心大致重合结束。 这样，最后圆形的窗口会落到像素分布最大的地方，也就是图中的绿色圈，命名为C2。meanshift算法除了应用在视频追踪当中，在聚类，平滑等等各种涉及到数据以及非监督学习的场合当中均有重要应用，是一个应用广泛的算法。<br>参数：probImage: ROI区域，即目标的直方图的反向投影<br>window： 初始搜索窗口，就是定义ROI的rect<br>criteria: 确定窗口搜索停止的准则，主要有迭代次数达到设置的最大值，窗口中心      的漂移值大于某个设定的限值等。<br>实现Meanshift的主要流程是：<br>读取视频文件：cv.videoCapture()<br>感兴趣区域设置：获取第一帧图像，并设置目标区域，即感兴趣区域<br>计算直方图：计算感兴趣区域的HSV直方图，并进行归一化<br>目标追踪：设置窗口搜索停止条件，直方图反向投影，进行目标追踪，并在目标位置绘    制矩形框。<br>2.camshift算法：连续自适应MeanShift算法，是对MeanShift算法的改进算法，可随着跟踪目标的大小变化实时调整搜索窗口的大小，具有较好的跟踪效果。Camshift算法首先应用meanshift，一旦meanshift收敛，它就会更新窗口的大小，还计算最佳拟合椭圆的方向，从而根据目标的位置和大小更新搜索窗口。<br>Camshift在OpenCV中实现时，只需将上述的meanshift函数改为Camshift函数即可</p>
<p>Mat头部：图片的长宽高，参数的数据类型，通道数</p>
<p>赋值a=b是改变指针，只有拷贝才能创建新的。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.lolcheng.top">沈畅</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.lolcheng.top/2024/03/15/opencv/">https://www.lolcheng.top/2024/03/15/opencv/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.lolcheng.top" target="_blank">随风的神秘小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OpenCV/">OpenCV</a></div><div class="post_share"><div class="social-share" data-image="https://www.lolcheng-picbed.top/img/opencv.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/31/yolov5/" title="yolov5学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/yolov5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">yolov5学习</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/13/mysql/" title="MySQL学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/mysql.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MySQL学习</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">沈畅</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.lolcheng-picbed.top/img/qq.png" target="_blank" title="QQ"><i class="fa-brands fa-qq" style="color: #1169EE;"></i></a><a class="social-icon" href="https://www.lolcheng-picbed.top/img/wechat.png" target="_blank" title="Wechat"><i class="fa-brands fa-weixin" style="color: #1AE642;"></i></a><a class="social-icon" href="https://github.com/lolcheng" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/406219866" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili" style="color: #11EEEE;"></i></a><a class="social-icon" href="mailto:1397799304@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">贵客来访,未曾远迎，失敬失敬！我是小屋的主人随风，想知道我的更多资料欢迎点击关于查看~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ubuntu-opencv-vscode-cmakelists%EF%BC%9A"><span class="toc-text">ubuntu+opencv+vscode+cmakelists：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84anaconda%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-text">常用的anaconda命令：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%9A"><span class="toc-text">基础知识：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9B%BE%E5%83%8FIO%E6%93%8D%E4%BD%9C"><span class="toc-text">一、图像IO操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BB%98%E5%88%B6%E5%87%A0%E4%BD%95%E5%9B%BE%E5%BD%A2%EF%BC%9A"><span class="toc-text">二、绘制几何图形：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%E5%B9%B6%E4%BF%AE%E6%94%B9%E5%9B%BE%E5%83%8F%E4%B8%AD%E7%9A%84%E5%83%8F%E7%B4%A0%E7%82%B9"><span class="toc-text">三、获取并修改图像中的像素点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%8E%B7%E5%8F%96%E5%9B%BE%E5%83%8F%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%9A"><span class="toc-text">四、获取图像的属性：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%9B%BE%E5%83%8F%E9%80%9A%E9%81%93%E7%9A%84%E6%8B%86%E5%88%86%E4%B8%8E%E5%90%88%E5%B9%B6"><span class="toc-text">五、图像通道的拆分与合并</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4%E7%9A%84%E8%BD%AC%E5%8F%98%EF%BC%9Acv-cvtColor-img%EF%BC%8Ccode"><span class="toc-text">六、色彩空间的转变：cv.cvtColor(img，code)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%9B%BE%E5%83%8F%E7%9A%84%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E4%B8%8E%E6%B7%B7%E5%90%88%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-text">七、图像的四则运算与混合操作：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2%EF%BC%9A"><span class="toc-text">八、几何变换：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%BD%A2%E6%80%81%E5%AD%A6%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-text">九、形态学操作：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%9B%BE%E5%83%8F%E5%99%AA%E5%A3%B0"><span class="toc-text">十、图像噪声</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%9B%BE%E5%83%8F%E5%B9%B3%E6%BB%91%EF%BC%9A"><span class="toc-text">十一、图像平滑：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E7%9B%B4%E6%96%B9%E5%9B%BE%EF%BC%9A"><span class="toc-text">十二、直方图：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B%EF%BC%9A"><span class="toc-text">十三、边缘检测：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D%EF%BC%9Acv-matchTemplate-img-template-method"><span class="toc-text">十四、模板匹配：cv.matchTemplate(img,template,method)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2%EF%BC%9A"><span class="toc-text">十五、霍夫变换：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B%EF%BC%9A"><span class="toc-text">十六、角点检测：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%83%E3%80%81%E8%A7%86%E9%A2%91%E8%AF%BB%E5%86%99%EF%BC%9A"><span class="toc-text">十七、视频读写：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AB%E3%80%81%E8%A7%86%E9%A2%91%E8%BF%BD%E8%B8%AA%EF%BC%9A"><span class="toc-text">十八、视频追踪：</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By 沈畅</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/机器人/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🤖 机器人 (8)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/人工智能/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🧠 人工智能 (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/嵌入式/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🔬 嵌入式 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/控制理论/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 控制理论 (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/编程语言学习/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💻 编程语言学习 (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/编译进化/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🧬 编译进化 (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.lolcheng.top/categories/数据收集与处理/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🔢 数据收集与处理 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://www.lolcheng.top/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #69e8f2}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = '2695db4e50830126ecac269d88eab6e4';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/12/05/ROS/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/ROS.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-05</span><a class="blog-slider__title" href="2023/12/05/ROS/" alt="">ROS学习</a><div class="blog-slider__text">有关于ROS方面的相关知识</div><a class="blog-slider__button" href="2023/12/05/ROS/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/09/13/PID/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/pid.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-09-13</span><a class="blog-slider__title" href="2022/09/13/PID/" alt="">PID控制</a><div class="blog-slider__text">有关于PID控制方面的相关知识</div><a class="blog-slider__button" href="2022/09/13/PID/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/03/15/opencv/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/opencv.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-15</span><a class="blog-slider__title" href="2024/03/15/opencv/" alt="">OpenCV学习</a><div class="blog-slider__text">有关于OpenCV方面的相关知识</div><a class="blog-slider__button" href="2024/03/15/opencv/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/10/14/DeepLearning/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/DeepLearning.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-10-14</span><a class="blog-slider__title" href="2023/10/14/DeepLearning/" alt="">深度学习</a><div class="blog-slider__text">有关于人工智能深度学习方面的相关知识，文章部分内容引用自吴恩达老师</div><a class="blog-slider__button" href="2023/10/14/DeepLearning/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/09/17/C#/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/CSharp.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-09-17</span><a class="blog-slider__title" href="2023/09/17/C#/" alt="">C#学习</a><div class="blog-slider__text">有关于C#方面的相关知识</div><a class="blog-slider__button" href="2023/09/17/C#/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/09/peripheral/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/stm32.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-09</span><a class="blog-slider__title" href="2023/07/09/peripheral/" alt="">STM32F4外设学习</a><div class="blog-slider__text">有关于STM32F4外设方面的相关知识</div><a class="blog-slider__button" href="2023/07/09/peripheral/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/17/DesignMode/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/DesignMode.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-17</span><a class="blog-slider__title" href="2023/07/17/DesignMode/" alt="">设计模式学习</a><div class="blog-slider__text">有关于设计模式方面的相关知识</div><a class="blog-slider__button" href="2023/07/17/DesignMode/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/08/16/bezier/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.lolcheng-picbed.top/img/bezier.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-08-16</span><a class="blog-slider__title" href="2023/08/16/bezier/" alt="">曲线插值与拟合算法</a><div class="blog-slider__text">有关于曲线插值与拟合算法方面的相关知识</div><a class="blog-slider__button" href="2023/08/16/bezier/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '0.5s');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '0.5s');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>